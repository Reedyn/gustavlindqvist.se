<aside class="Comments hidden@print" aria-labelledby="kommentarer">
    <h2 class="Comments__title separator-heading" id="kommentarer"><span>Kommentarer</span></h2>
    {% if postInteractions.replies.length %}
    <ol class="Comments__list">
        {% for reply in postInteractions.replies %}
            {%- set sluggedName = reply.author.name | slug -%}
            <li class="Comments__list-item {% if reply.author['is-me'] %}-is-me{% endif %} -{{ reply["wm-property"] }}" data-source="{{ reply["wm-source"] }}">
                <span class="Comments__metadata">
                {% if reply.author.url %}<a class="Comments__author" href="{{ reply.author.url }}" target="_blank" rel="external noopener noreferrer">
                {% else %}<span class="Comments__author">{% endif %}
                    <img
                            class="Comments__avatar"
                            src="{{ reply.author.photo or 'https://source.boringavatars.com/beam/45/' + sluggedName + '?colors=262AFF,4326FF,6226FF,8426FF,8727CC' }}"
                            alt="{{ reply.author.name }}"
                            loading="lazy"
                            decoding="async"
                            width="48"
                            height="48"
                    >
                    {{ reply.author.name }}
                {% if reply.author.url %}</a>{% else %}</span>{% endif %}
                {% if reply['action-type'] === 'tweet'%}tweetade{% elseif reply['wm-property'] === 'repost-of' %}delade{% else %}kommenterade{% endif %} {%  if reply.url %}<a href="{{ reply.url }}" target="_blank" rel="external noopener noreferrer"> <time class="timeago" prefix datetime="{{ reply.published | date("YYYY-MM-DDTHH:mm:ss") }}" title="{{ reply.published | date("YYYY-MM-DD") }}">{{ reply.published | date("YYYY-MM-DD") }}</time></a>{% else %}<span> <time class="timeago" prefix datetime="{{ reply.published | date("YYYY-MM-DDTHH:mm:ss") }}" title="{{ reply.published | date("YYYY-MM-DD HH:mm") }}">{{ reply.published | date("YYYY-MM-DD") }}</time></span>{% endif %}
                </span>
                {% if reply['wm-property'] !== 'repost-of' %}<p>{{ reply.content.value | safe }}</p>{% endif %}
            </li>
        {% endfor %}
    </ol>
    {% endif %}
    <div class="Comments__panel">
        <form class="Form -inactive" id="comment-form" name="comment" method="POST" data-netlify="true">
            <input type="hidden" name="url" value="{{ metadata.url + page.url }}">
            <noscript>
                <style>
                    .Form.-inactive label, .Form.-inactive .-collapsed{ display: block !important; }
                    .Form.-inactive textarea { height: auto !important; resize: vertical; overflow: auto;}
                </style>
            </noscript>
            <p class="Form__group">
                <textarea id="content" name="content" required placeholder="Skriv en kommentarâ€¦"></textarea>
                <label for="content">Kommentar</label>
            </p>
            <p class="Form__group -collapsed">
                <input type="text" id="author.name" name="author.name" required>
                <label for="author.name">Namn</label>
            </p>
            <p class="Form__group -collapsed">
                <input type="email" id="author.email" name="author.email">
                <label for="author.email">E-postadress (frivillig)</label>
            </p>
            <p class="Form__group -collapsed">
                <input type="text" id="author.url" name="author.url">
                <label for="author.url">Webbplats (frivillig)</label>
            </p>
            <p class="Form__group -collapsed">
                <button class="Button" type="submit">Skicka kommentar</button>
            </p>
        </form>
        <p id="form-status" class="Comments__status hidden" aria-live="polite"></p>
        <script src="/assets/javascript/comments.js" async></script>
    </div>
</aside>
